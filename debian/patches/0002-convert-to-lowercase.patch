From cd716fc9d22b450fee2b2374a31f96aa50d95978 Mon Sep 17 00:00:00 2001
From: Shanavas M <shanavas.m2@gmail.com>
Date: Fri, 28 Oct 2016 15:03:07 +0300
Subject: [PATCH 1/2] Convert package name to lowercase

Fixes https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=840226
---
 npm2deb/__init__.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/npm2deb/__init__.py b/npm2deb/__init__.py
index 1eabf0b..4907506 100644
--- a/npm2deb/__init__.py
+++ b/npm2deb/__init__.py
@@ -471,7 +471,7 @@ def _get_Depends(self):
         return '\n , '.join(depends)
 
     def _debianize_name(self, name):
-        return name.replace('_', '-')
+        return name.replace('_', '-').lower()
 
     def _get_github_url_from_git(self, url):
         result = _getstatusoutput(

From fe8d547405081c36a25a59e201be0127f7d815cb Mon Sep 17 00:00:00 2001
From: Shanavas M <shanavas.m2@gmail.com>
Date: Fri, 28 Oct 2016 15:10:40 +0300
Subject: [PATCH 2/2] Search debianized package names

---
 npm2deb/__init__.py | 5 +----
 npm2deb/mapper.py   | 4 +++-
 npm2deb/utils.py    | 3 +++
 3 files changed, 7 insertions(+), 5 deletions(-)

diff --git a/npm2deb/__init__.py b/npm2deb/__init__.py
index 4907506..53b46ad 100644
--- a/npm2deb/__init__.py
+++ b/npm2deb/__init__.py
@@ -53,7 +53,7 @@ def __init__(self, module_name=None, args={}):
                 self.noclean = args['noclean']
 
         self.read_package_info()
-        self.debian_name = 'node-%s' % self._debianize_name(self.name)
+        self.debian_name = 'node-%s' % utils.debianize_name(self.name)
         self.debian_author = 'FIX_ME debian author'
         if 'DEBFULLNAME' in _os.environ and 'DEBEMAIL' in _os.environ:
             self.debian_author = "%s <%s>" % \
@@ -470,9 +470,6 @@ def _get_Depends(self):
 
         return '\n , '.join(depends)
 
-    def _debianize_name(self, name):
-        return name.replace('_', '-').lower()
-
     def _get_github_url_from_git(self, url):
         result = _getstatusoutput(
             "nodejs -e "
diff --git a/npm2deb/mapper.py b/npm2deb/mapper.py
index 5a7e26f..e7d5b13 100644
--- a/npm2deb/mapper.py
+++ b/npm2deb/mapper.py
@@ -4,6 +4,8 @@
 from subprocess import getstatusoutput as _getstatusoutput
 
 from npm2deb.utils import debug as _debug
+from npm2deb.utils import debianize_name as _debianize_name
+
 
 DB_URL = 'https://wiki.debian.org/Javascript/Nodejs/Database'
 
@@ -50,7 +52,7 @@ def get_debian_package(self, node_module):
                 result['info'] = ('error', db_package['error'])
                 self.append_warning('error', node_module, db_package['error'])
         else:
-            result['name'] = 'node-%s' % node_module
+            result['name'] = 'node-%s' % _debianize_name(node_module)
 
         if not result['name']:
             return result
diff --git a/npm2deb/utils.py b/npm2deb/utils.py
index a2daf65..6937f13 100644
--- a/npm2deb/utils.py
+++ b/npm2deb/utils.py
@@ -107,3 +107,6 @@ def create_dir(dir):
     except OSError as oserror:
         raise OSError("Error: directory %s already exists." %
                       oserror.filename)
+
+def debianize_name(name):
+    return name.replace('_', '-').lower()
